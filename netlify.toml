[build]
  # Build Jekyll site; function deps installed by Functions Install Core plugin
  command = "bundle exec jekyll build"
  # Jekyll outputs to _site by default
  publish = "_site"

[build.environment]
  # Ensure production optimizations in Jekyll
  JEKYLL_ENV = "production"
  # Use the same Ruby version as .ruby-version for consistent builds
  RUBY_VERSION = "3.3"
  # Node version used for any post-processing scripts
  NODE_VERSION = "18"
  # Persist gems between builds to speed up Bundler
  BUNDLE_PATH = "vendor/bundle"
  # Donâ€™t install dev/test groups on Netlify
  BUNDLE_WITHOUT = "development:test"
  # Set timezone for schedule generation and logs
  TZ = "America/New_York"

[functions]
  # Directory for Netlify Functions
  directory = "netlify/functions"
  # Use esbuild so ESM deps (like @netlify/blobs) bundle correctly
  node_bundler = "esbuild"

[[plugins]]
package = "@netlify/plugin-functions-install-core"
